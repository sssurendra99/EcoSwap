<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!--
    PRODUCT CARD FRAGMENT
    Reusable product card component

    Usage:
    <div th:replace="~{public/fragments/product-card :: product-card(product=${product})}"></div>

    Or in a loop:
    <div th:each="product : ${products}"
         th:replace="~{public/fragments/product-card :: product-card(product=${product})}"></div>
-->

<body>

<!-- Product Card Fragment -->
<div th:fragment="product-card(product)" class="product-card">
    <!-- Product Link Wrapper -->
    <a th:href="@{/product/{id}(id=${product.id})}" class="product-card-link">
        <!-- Product Image Section -->
        <div class="product-image-wrapper">
            <img th:if="${product.image != null and product.image != ''}"
                 th:src="${product.image}"
                 th:alt="${product.name}"
                 class="product-image"
                 loading="lazy"/>

            <!-- Eco Badge Overlay (Optional) -->
            <span class="eco-badge-overlay"
                  th:if="${showEcoBadge != null and showEcoBadge}">
                üå± Eco-Friendly
            </span>
        </div>

        <!-- Product Info Section -->
        <div class="product-info">
            <!-- Category -->
            <p class="product-category"
               th:if="${product.category != null}"
               th:text="${product.category.name}">
                Category
            </p>

            <!-- Product Name -->
            <h3 class="product-name" th:text="${product.name}">
                Product Name
            </h3>

            <!-- Product Description -->
            <p class="product-description"
               th:if="${product.description != null and product.description != ''}"
               th:text="${product.description}">
                Product description goes here
            </p>

            <!-- Environmental Impact (Optional) -->
            <div class="environmental-impact"
                 th:if="${product.co2Saved != null or product.plasticSaved != null}">
                <span th:if="${product.co2Saved != null}" class="impact-badge">
                    üåç <span th:text="${product.co2Saved}">0</span>kg CO‚ÇÇ Saved
                </span>
                <span th:if="${product.plasticSaved != null}" class="impact-badge">
                    ‚ôªÔ∏è <span th:text="${product.plasticSaved}">0</span>g Plastic Saved
                </span>
            </div>

            <!-- Product Footer (Price & Stock) -->
            <div class="product-footer">
                <span class="product-price">
                    $<span th:text="${#numbers.formatDecimal(product.price, 1, 2)}">0.00</span>
                </span>

                <span th:if="${product.stock != null and product.stock > 0}"
                      class="stock-status">
                    In Stock (<span th:text="${product.stock}">0</span>)
                </span>
                <span th:if="${product.stock != null and product.stock <= 0}"
                      class="stock-status out-of-stock">
                    Out of Stock
                </span>
            </div>
        </div>
    </a>

    <!-- Add to Cart Button -->
    <button th:if="${product.stock != null and product.stock > 0}"
            class="add-to-cart-btn"
            th:onclick="'addToCart(' + ${product.id} + ', this)'"
            th:data-product-id="${product.id}">
        <i class="fas fa-shopping-cart"></i>
        <span class="btn-text">Add to Cart</span>
    </button>

    <button th:if="${product.stock == null or product.stock <= 0}"
            class="add-to-cart-btn out-of-stock-btn"
            disabled>
        <i class="fas fa-ban"></i>
        <span class="btn-text">Out of Stock</span>
    </button>
</div>

<!--
    SIMPLIFIED PRODUCT CARD (Minimal version for related products, etc.)

    Usage:
    <div th:replace="~{public/fragments/product-card :: product-card-simple(product=${product})}"></div>
-->


</body>
</html>
